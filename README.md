## DPINM

## The develop inmformation about dpinm

### 目标:
1. 支持分布式、并发以及数据备份的INMD。
2. 支持organization-based数据分割
3. 支持distributed transaction

### 目标成果：
1. runnable DPINM system：insert与query语句，数据划分与事务
2. 项目文档：类图（以及说明类的基本用途），各模块处理流程，重要函数方法的注释

### 测试：
1. 完成充足的功能性测试，主要包括 （1）数据导入之后对象和关系是否正确生成和保存，（2）organization-based partition 对象是否正确detected和unified；（3）查询是否正确执行并得到结果；（4）事务是否正确执行，ACID。
2. 吞吐量测试，分为4种数据access特点进行测试：Read-only（纯数据查询）， read-intense（以读任务为主70%，少量写30%），write-only（纯数据插入），write-intense。
3. 测试随着数据量增加，吞吐量的变化。

### 时间安排
1. 4月23- 5月10日，完成所有实现部分，以及准备功能测试的测试用例。（两周+五一假期一共20天，同时建议着手准备答辩PPT（大纲，内容etc.）。）
2. 5月10-17日，进行系统的功能性测试。马杨功能测试（1），（2）；徐晶功能测试（1）（3）；张剑功能测试（4）以及吞吐量实验的准备和部分测试。
3. 5月18-31日，进行吞吐量等性能测试。
注意：1. 每天更新Github实现和测试进度和过程中发现的问题。2. 在测试过程中发现的功能性问题需及时解决。3.对于性能上体现的缺点，讨论之后望有所改进。4. 按时间表的计划，按时按质完成。

## 张剑

### 需要完成的功能
1. 客户端Master 多线程访问，完成度 100%<br />
3/07<客户端测试代码已完成，目前同时插入语句dpinm会发生死锁，debuging> 发生死锁修改了全部底层调用接口，发现死锁后就abort事务，目前测试仍未通过。<br />
3/10日，死锁问题已解决，测试instance0831.txt，把文件从中间分开两份，两个线程来插入，发现实例部分段错误，已告诉马杨。 <br />
还有两点问题：1 实例bug，2 query 客户端的反序列化。 告一段落。<br />
实例bug（其实是底层bug），已修正，插入语句没问题，只是语句之间的逻辑顺序无法控制。<br />
3/14,使用语句顺序无关的dbpediadata数据测试, 发现有mpi通信接收不到消息的问题，会导致卡死，尚未找到原因。<br />
3/18，卡死是由于MPI通信等待和BDB锁资源之间形成的死锁，修改MPI接口，加入超时机制，修改BDB配置，加入超时机制。done <br />
2. Replication <原型代码ing> 完成度 30% <br />
3/14已经跑通一个Replication原型例子，接下来要设计如何融入DPINM中 
3. 打印元数据统计信息 完成度 0%
4. 测试 and 文档  完成度 0%
5. 单机版INM client 合并 完成度 70%<br />
完成多线程客户端的时候发现原来完成度就不错，需要整合的并不多。

### 其它模块接口
1. 查询部分跨接点后一个子节点将会收到两次查询结果，在Master上因为存储结构问题，回把之前的结果覆盖掉 完成度 100% <br />
2. 底层添加获取organization个数的接口 100%<br />
3. orgnization detect 在遍历子节点的时候卡住 100%<br />
3/17 原因是detect走的是command命令流程，没有初始化全局事务ID和TXN的缓冲池，导致master上一个事务未释放的情况下，另一个事务又去请求，导致死锁。<br />

### 接口
1. inm.cfg文件中，静态参数与动态参数区分开<br />
2. 需添加参数：<br />
2.1 query_processing_mode （1 or 2）指明查询处理采用的方法<br />
2.2 object_division （true or false）是否拆分大对象<br />
2.3 organization_unification_method （1 or 2）指明采用的organization detection的方法<br />

### ----------------------------------New ----------------------------------------
1. *数据load的速度 extremely slow！（选择2PC mode是否开启，对照组对比效果）
2. 数据load之后，再次正常打开数据库失败，读不出数据。
3. 在一致性hash的partition模式下，当数据reshard之后，对象的所属节点查找失效。

## 马杨
### 需要完成的功能
1. organization detecting新的设计策略实现  完成度100%
2. organization unifying新的设计策略实现  完成度30%
3. 测试与文档  完成度0%

## 徐晶
1. 查询新处理流程实现  完成度45%
2. 查询类图以及处理流程文档  完成度0%

## 陈诗雅
1. 大对象拆分工作   完成度80%
2. 说明文档   完成度50%
